const request = require('./request-service');
const logger = require('../../config/winston-config');

const RESULT_API = 'https://www.immuniweb.com/mobile/api/test_info/id/';

exports.scanResult = async (scanId) => {
  try {
    const result = await request.get(`${RESULT_API}${scanId}`);
    logger.info(`App scan ${result}`);
    if (!result) {
      logger.error(`Unable to fetch result for scan ${scanId}`);
    }
    return result;
  } catch (exception) {
    logger.error(`Error occured while calling a scanner ${exception}`);
    return null;
  }
};
